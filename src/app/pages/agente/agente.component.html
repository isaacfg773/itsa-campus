<section class="agente">
  <div class="container">

    <!-- Encabezado -->
    <header class="head">
      <div class="head__left">
        <h1>Agente ITSA</h1>
        <p class="lead">Atenci√≥n inteligente para admisi√≥n, carreras, requisitos, horarios y m√°s.</p>
        <div class="status">
          <span class="dot"></span> Online ‚Ä¢ tiempo de respuesta ~1 min
        </div>
      </div>
      <div class="head__right">
        <a routerLink="/" class="back">‚Üê Volver</a>
      </div>
    </header>

    <!-- Chips (atajos de preguntas) -->
    <div class="chips">
      <button class="chip" (click)="quickAsk('Requisitos de admisi√≥n 2025')">Requisitos 2025</button>
      <button class="chip" (click)="quickAsk('Proceso de inscripci√≥n paso a paso')">Proceso de inscripci√≥n</button>
      <button class="chip" (click)="quickAsk('Carreras disponibles y duraci√≥n')">Oferta acad√©mica</button>
      <button class="chip" (click)="quickAsk('D√≥nde pago y qu√© documentos llevo')">Pagos y documentos</button>
      <button class="chip" (click)="quickAsk('Sedes y horarios de atenci√≥n')">Sedes y horarios</button>
    </div>

    <!-- Layout -->
    <div class="chat">
      <!-- Sidebar -->
      <aside class="aside">
        <div class="card">
          <h3>Accesos r√°pidos</h3>
          <ul class="links">
            <li><a href="https://itsa.edu.bo/2025/01/15/proceso-de-admision-nuevo-2025/"
                   target="_blank" rel="noopener">Proceso de Admisi√≥n 2025</a></li>
            <li><a href="https://orion.itsa.edu.bo/postulantes/registrarPostulante.xhtml"
                   target="_blank" rel="noopener">Formulario de Admisi√≥n (ORION)</a></li>
            <li><a routerLink="/oferta">Oferta de Carreras</a></li>
            <li><a routerLink="/contacto">Contacto y WhatsApp</a></li>
          </ul>
        </div>

        <div class="card">
          <h3>Horarios de atenci√≥n</h3>
          <p>Lun‚ÄìVie ‚Ä¢ 08:00‚Äì12:00 / 14:00‚Äì18:00</p>
          <p>üìû 67598222</p>
        </div>

        <div class="card">
          <h3>Preguntas frecuentes</h3>
          <details>
            <summary>¬øC√≥mo me inscribo?</summary>
            <p>Completa el formulario ORION y adjunta tus documentos. Luego presenta tu voucher de pago.</p>
          </details>
          <details>
            <summary>¬øCu√°les son los requisitos?</summary>
            <p>CI, t√≠tulo de bachiller, certificado de notas y foto 3x3. Verifica en el Proceso de Admisi√≥n 2025.</p>
          </details>
          <details>
            <summary>¬øLas carreras son semestrales?</summary>
            <p>S√≠. Revisa la malla y duraci√≥n en la p√°gina de cada carrera.</p>
          </details>
        </div>
      </aside>

      <!-- Chat principal -->
      <main class="panel">
        <div class="messages">
          <div *ngFor="let m of messages()" class="row" [class.me]="m.from==='user'">
            <div class="bubble" [class.user]="m.from==='user'">
              <div class="from">{{ m.from==='user' ? 'T√∫' : 'Agente ITSA' }}</div>
              <div class="text" [innerText]="m.text"></div>
              <!-- Adjuntos (cuando conectemos n8n) -->
              <div class="atts" *ngIf="m.attachments?.length">
                <ng-container *ngFor="let a of m.attachments">
                  <a *ngIf="a.type==='link'" [href]="a.url" target="_blank">{{ a.label || a.url }}</a>
                  <img *ngIf="a.type==='image'" [src]="a.url" [alt]="a.label || 'Imagen'" />
                </ng-container>
              </div>
            </div>
          </div>
          <div class="typing" *ngIf="busy()"><span></span><span></span><span></span></div>
        </div>

        <footer class="composer">
          <input
  type="text"
  [ngModel]="input()"
  (ngModelChange)="input.set($event)"
  (keyup.enter)="send()"
  placeholder="Escribe tu consulta‚Ä¶ (Ej: requisitos para inscripci√≥n)"
/>

          <button (click)="send()" [disabled]="busy()">Enviar</button>
        </footer>

        <div class="legal">
          Al usar este asistente aceptas recibir enlaces a recursos oficiales de ITSA. No compartas datos sensibles.
        </div>
      </main>
    </div>

  </div>
</section>
